<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Santo del Día</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 50px;
            max-width: 800px;
            width: 100%;
            text-align: center;
        }

        .date {
            font-size: 4rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .saint-name {
            font-size: 2.5rem;
            color: #764ba2;
            margin-bottom: 30px;
            font-weight: bold;
        }

        .saint-description {
            font-size: 1.2rem;
            line-height: 1.8;
            color: #333;
            margin-bottom: 30px;
            text-align: justify;
        }

        .wiki-link {
            display: inline-block;
            padding: 15px 30px;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .wiki-link:hover {
            background: #764ba2;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(118, 75, 162, 0.4);
        }

        .loading {
            font-size: 1.5rem;
            color: #667eea;
        }

        .error {
            color: #e74c3c;
            font-size: 1.2rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 30px;
            }
            
            .date {
                font-size: 2.5rem;
            }
            
            .saint-name {
                font-size: 1.8rem;
            }
            
            .saint-description {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="date" id="date">Cargando...</div>
        <div class="saint-name" id="saintName">
            <div class="loading">Buscando santo del día...</div>
        </div>
        <div class="saint-description" id="saintDescription"></div>
        <a href="#" id="wikiLink" class="wiki-link" style="display: none;" target="_blank">
            Ver más en Wikipedia
        </a>
    </div>

    <script>
        // Mostrar la fecha actual
        function displayDate() {
            const today = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            const dateString = today.toLocaleDateString('es-ES', options);
            document.getElementById('date').textContent = dateString;
        }

        // Obtener el santo del día desde la API de Santos Católicos
        async function getSaintOfTheDay() {
            try {
                const today = new Date();
                const month = today.getMonth() + 1;
                const day = today.getDate();
                
                // Usamos la API de santos católicos
                const response = await fetch(`https://api.religion.ar/api/santos/${month}/${day}`);
                
                if (!response.ok) {
                    throw new Error('No se pudo obtener la información del santo');
                }
                
                const data = await response.json();
                
                if (data && data.data && data.data.length > 0) {
                    const saint = data.data[0];
                    displaySaintInfo(saint);
                } else {
                    // Si no hay datos, usar información de respaldo
                    await getSaintFromWikipedia();
                }
            } catch (error) {
                console.error('Error:', error);
                await getSaintFromWikipedia();
            }
        }

        // Método alternativo usando scraping de Wikipedia
        async function getSaintFromWikipedia() {
            try {
                const today = new Date();
                const month = today.toLocaleDateString('es-ES', { month: 'long' });
                const day = today.getDate();
                
                // Buscar en Wikipedia española
                const searchQuery = `santo ${day} de ${month}`;
                const searchUrl = `https://es.wikipedia.org/w/api.php?action=opensearch&search=${encodeURIComponent(searchQuery)}&limit=1&namespace=0&format=json&origin=*`;
                
                const searchResponse = await fetch(searchUrl);
                const searchData = await searchResponse.json();
                
                if (searchData[1].length > 0) {
                    const pageTitle = searchData[1][0];
                    const pageUrl = searchData[3][0];
                    
                    // Obtener el resumen de la página
                    const summaryUrl = `https://es.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(pageTitle)}`;
                    const summaryResponse = await fetch(summaryUrl);
                    const summaryData = await summaryResponse.json();
                    
                    displaySaintInfo({
                        nombre: pageTitle,
                        descripcion: summaryData.extract || 'No hay descripción disponible.',
                        url: pageUrl
                    });
                } else {
                    displayDefaultSaint();
                }
            } catch (error) {
                console.error('Error al obtener de Wikipedia:', error);
                displayDefaultSaint();
            }
        }

        function displaySaintInfo(saint) {
            const saintName = document.getElementById('saintName');
            const saintDescription = document.getElementById('saintDescription');
            const wikiLink = document.getElementById('wikiLink');
            
            saintName.textContent = saint.nombre || saint.name || 'Santo del Día';
            
            let description = saint.descripcion || saint.description || saint.historia || '';
            // Limitar la descripción a aproximadamente 300 caracteres
            if (description.length > 300) {
                description = description.substring(0, 300) + '...';
            }
            saintDescription.textContent = description;
            
            if (saint.url || saint.wiki_url) {
                wikiLink.href = saint.url || saint.wiki_url;
                wikiLink.style.display = 'inline-block';
            } else {
                // Si no hay URL, buscar en Wikipedia
                const searchName = (saint.nombre || saint.name).replace(/^San(to|ta)?\s+/i, '');
                wikiLink.href = `https://es.wikipedia.org/wiki/${encodeURIComponent(searchName)}`;
                wikiLink.style.display = 'inline-block';
            }
        }

        function displayDefaultSaint() {
            const today = new Date();
            const month = today.getMonth() + 1;
            const day = today.getDate();
            
            // Algunos santos populares por fecha
            const saintsCalendar = {
                '1-1': { nombre: 'Santa María, Madre de Dios', descripcion: 'La Virgen María es venerada como la madre de Jesucristo y Madre de Dios.' },
                '1-6': { nombre: 'Epifanía del Señor', descripcion: 'Celebración de la manifestación de Jesucristo a los Reyes Magos.' },
                '3-19': { nombre: 'San José', descripcion: 'Esposo de la Virgen María y padre adoptivo de Jesús.' },
                '4-23': { nombre: 'San Jorge', descripcion: 'Mártir cristiano, conocido por la leyenda del dragón.' },
                '11-4': { nombre: 'San Carlos Borromeo', descripcion: 'Cardenal arzobispo de Milán, destacado en la Reforma Católica.' }
            };
            
            const key = `${month}-${day}`;
            const saint = saintsCalendar[key] || {
                nombre: 'Santo del Día',
                descripcion: 'Información no disponible en este momento. Por favor, visite el calendario litúrgico católico para más información.'
            };
            
            saint.url = `https://es.wikipedia.org/wiki/${encodeURIComponent(saint.nombre)}`;
            displaySaintInfo(saint);
        }

        // Inicializar la página
        displayDate();
        getSaintOfTheDay();
    </script>
</body>
</html>

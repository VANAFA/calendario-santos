<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Santo del D√≠a</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 50px;
            max-width: 1200px;
            width: 100%;
            text-align: center;
        }

        .date-picker-container {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .date-picker-container label {
            color: #667eea;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .date-picker-container select {
            padding: 8px 12px;
            border: 2px solid #667eea;
            border-radius: 5px;
            font-size: 1rem;
            background: white;
            cursor: pointer;
            transition: border-color 0.3s;
        }

        .date-picker-container select:hover {
            border-color: #764ba2;
        }

        .date-picker-container select:focus {
            outline: none;
            border-color: #764ba2;
            box-shadow: 0 0 5px rgba(118, 75, 162, 0.3);
        }

        .date {
            font-size: 4rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .saints-container {
            display: flex;
            flex-direction: column;
            gap: 40px;
            margin-top: 30px;
        }

        .saint-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .saint-image {
            width: 250px;
            height: 250px;
            object-fit: cover;
            border-radius: 15px;
            margin: 0 auto 20px;
            display: block;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .saint-image.placeholder {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 4rem;
        }

        .saint-name {
            font-size: 2.5rem;
            color: #764ba2;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .saint-description {
            font-size: 1.2rem;
            line-height: 1.8;
            color: #333;
            margin-bottom: 20px;
            text-align: justify;
        }

        .links-container {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .wiki-link {
            display: inline-block;
            padding: 15px 30px;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .wiki-link:hover {
            background: #764ba2;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(118, 75, 162, 0.4);
        }

        .vatican-link {
            display: inline-block;
            padding: 15px 30px;
            background: #ffd700;
            color: #333;
            text-decoration: none;
            border-radius: 50px;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
            font-weight: bold;
        }

        .vatican-link:hover {
            background: #ffed4e;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.6);
        }

        .loading {
            font-size: 1.5rem;
            color: #667eea;
        }

        .error {
            color: #e74c3c;
            font-size: 1.2rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 30px;
            }
            
            .date {
                font-size: 2.5rem;
            }
            
            .saint-name {
                font-size: 1.8rem;
            }
            
            .saint-description {
                font-size: 1rem;
            }

            .date-picker-container {
                position: relative;
                top: 0;
                right: 0;
                margin-bottom: 20px;
            }

            .saint-image {
                width: 200px;
                height: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="date-picker-container">
        <label for="monthPicker">Mes:</label>
        <select id="monthPicker">
            <option value="0">Enero</option>
            <option value="1">Febrero</option>
            <option value="2">Marzo</option>
            <option value="3">Abril</option>
            <option value="4">Mayo</option>
            <option value="5">Junio</option>
            <option value="6">Julio</option>
            <option value="7">Agosto</option>
            <option value="8">Septiembre</option>
            <option value="9">Octubre</option>
            <option value="10">Noviembre</option>
            <option value="11">Diciembre</option>
        </select>
        <label for="dayPicker">D√≠a:</label>
        <select id="dayPicker"></select>
    </div>
    
    <div class="container">
        <div class="date" id="date">Cargando...</div>
        <div id="saintsContainer">
            <div class="loading">Buscando santos del d√≠a...</div>
        </div>
    </div>

    <script>
        let selectedDate = new Date();

        // Inicializar selectores
        function initializeDatePickers() {
            const monthPicker = document.getElementById('monthPicker');
            const dayPicker = document.getElementById('dayPicker');
            
            monthPicker.value = selectedDate.getMonth();
            updateDayPicker();
            dayPicker.value = selectedDate.getDate();
            
            monthPicker.addEventListener('change', function() {
                selectedDate.setMonth(parseInt(this.value));
                updateDayPicker();
                displayDate();
                getSaintOfTheDay();
            });
            
            dayPicker.addEventListener('change', function() {
                selectedDate.setDate(parseInt(this.value));
                displayDate();
                getSaintOfTheDay();
            });
        }

        // Actualizar d√≠as seg√∫n el mes
        function updateDayPicker() {
            const dayPicker = document.getElementById('dayPicker');
            const month = selectedDate.getMonth();
            const year = selectedDate.getFullYear();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            
            const currentDay = selectedDate.getDate();
            dayPicker.innerHTML = '';
            
            for (let i = 1; i <= daysInMonth; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i;
                dayPicker.appendChild(option);
            }
            
            // Mantener el d√≠a seleccionado o ajustar si es inv√°lido
            if (currentDay <= daysInMonth) {
                dayPicker.value = currentDay;
            } else {
                dayPicker.value = daysInMonth;
                selectedDate.setDate(daysInMonth);
            }
        }

        // Mostrar la fecha actual
        function displayDate() {
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            const dateString = selectedDate.toLocaleDateString('es-ES', options);
            document.getElementById('date').textContent = dateString;
        }

        // Obtener imagen del santo desde Wikipedia/Wikimedia
        async function getSaintImage(saintName) {
            try {
                // Limpiar el nombre del santo
                const cleanName = saintName.replace(/^San(to|ta)?\s+/i, '');
                
                // Buscar la p√°gina del santo en Wikipedia
                const searchUrl = `https://es.wikipedia.org/w/api.php?action=query&titles=${encodeURIComponent(saintName)}&prop=pageimages&format=json&pithumbsize=300&origin=*`;
                
                const response = await fetch(searchUrl);
                const data = await response.json();
                
                const pages = data.query.pages;
                const pageId = Object.keys(pages)[0];
                
                if (pages[pageId].thumbnail) {
                    return pages[pageId].thumbnail.source;
                }
                
                return null;
            } catch (error) {
                console.error('Error al obtener imagen:', error);
                return null;
            }
        }

        // Obtener el santo del d√≠a desde la API de Santos Cat√≥licos
        async function getSaintOfTheDay() {
            try {
                const month = selectedDate.getMonth() + 1;
                const day = selectedDate.getDate();
                
                // Usamos la API de santos cat√≥licos
                const response = await fetch(`https://api.religion.ar/api/santos/${month}/${day}`);
                
                if (!response.ok) {
                    throw new Error('No se pudo obtener la informaci√≥n del santo');
                }
                
                const data = await response.json();
                
                if (data && data.data && data.data.length > 0) {
                    // Mostrar TODOS los santos del d√≠a
                    displayMultipleSaints(data.data);
                } else {
                    // Si no hay datos, usar informaci√≥n de respaldo
                    await getSaintFromWikipedia();
                }
            } catch (error) {
                console.error('Error:', error);
                await getSaintFromWikipedia();
            }
        }

        // Mostrar m√∫ltiples santos
        async function displayMultipleSaints(saints) {
            const container = document.getElementById('saintsContainer');
            container.innerHTML = '';
            
            for (const saint of saints) {
                await displaySaintCard(saint, container);
            }
        }

        // Crear una tarjeta para cada santo
        async function displaySaintCard(saint, container) {
            const card = document.createElement('div');
            card.className = 'saint-card';
            
            const saintName = saint.nombre || saint.name || 'Santo del D√≠a';
            
            // Obtener imagen
            const imageUrl = await getSaintImage(saintName);
            
            let imageHTML;
            if (imageUrl) {
                imageHTML = `<img src="${imageUrl}" alt="${saintName}" class="saint-image">`;
            } else {
                // Icono de placeholder si no hay imagen
                const initial = saintName.charAt(0);
                imageHTML = `<div class="saint-image placeholder">‚úù</div>`;
            }
            
            let description = saint.descripcion || saint.description || saint.historia || '';
            if (description.length > 400) {
                description = description.substring(0, 400) + '...';
            }
            
            const wikiUrl = saint.url || saint.wiki_url || `https://es.wikipedia.org/wiki/${encodeURIComponent(saintName)}`;
            const vaticanUrl = 'https://www.vaticannews.va/es/santos.html';
            
            card.innerHTML = `
                ${imageHTML}
                <div class="saint-name">${saintName}</div>
                <div class="saint-description">${description}</div>
                <div class="links-container">
                    <a href="${wikiUrl}" class="wiki-link" target="_blank">üìñ Ver en Wikipedia</a>
                    <a href="${vaticanUrl}" class="vatican-link" target="_blank">‚úùÔ∏è Vatican News</a>
                </div>
            `;
            
            container.appendChild(card);
        }

        // M√©todo alternativo usando scraping de Wikipedia
        async function getSaintFromWikipedia() {
            try {
                const month = selectedDate.toLocaleDateString('es-ES', { month: 'long' });
                const day = selectedDate.getDate();
                
                // Buscar la p√°gina espec√≠fica del d√≠a en Wikipedia
                const pageTitle = `${day} de ${month}`;
                const summaryUrl = `https://es.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(pageTitle)}`;
                
                const summaryResponse = await fetch(summaryUrl);
                
                if (summaryResponse.ok) {
                    const summaryData = await summaryResponse.json();
                    
                    // Extraer santos del contenido de la p√°gina
                    const extract = summaryData.extract || '';
                    
                    // Buscar menciones de "San" o "Santa" en el texto
                    const saintMatches = extract.match(/San(to|ta)?\s+[A-Z√Å√â√ç√ì√ö√ëa-z√°√©√≠√≥√∫√±\s]+/g);
                    
                    if (saintMatches && saintMatches.length > 0) {
                        // Tomar solo el primer santo mencionado
                        const mainSaint = saintMatches[0].trim();
                        
                        displayMultipleSaints([{
                            nombre: mainSaint,
                            descripcion: extract.length > 400 ? extract.substring(0, 400) + '...' : extract,
                            url: summaryData.content_urls?.desktop?.page || `https://es.wikipedia.org/wiki/${encodeURIComponent(pageTitle)}`
                        }]);
                        return;
                    }
                }
                
                displayDefaultSaint();
            } catch (error) {
                console.error('Error al obtener de Wikipedia:', error);
                displayDefaultSaint();
            }
        }

        function displayDefaultSaint() {
            const month = selectedDate.getMonth() + 1;
            const day = selectedDate.getDate();
            
            // Algunos santos populares por fecha
            const saintsCalendar = {
                '1-1': [
                    { nombre: 'Santa Mar√≠a, Madre de Dios', descripcion: 'La Virgen Mar√≠a es venerada como la madre de Jesucristo y Madre de Dios. En este d√≠a se celebra su maternidad divina.' },
                    { nombre: 'San Basilio el Grande', descripcion: 'Doctor de la Iglesia, obispo de Cesarea y uno de los grandes Padres Capadocios.' }
                ],
                '1-6': [{ nombre: 'Epifan√≠a del Se√±or', descripcion: 'Celebraci√≥n de la manifestaci√≥n de Jesucristo a los Reyes Magos.' }],
                '3-19': [{ nombre: 'San Jos√©', descripcion: 'Esposo de la Virgen Mar√≠a y padre adoptivo de Jes√∫s.' }],
                '4-23': [{ nombre: 'San Jorge', descripcion: 'M√°rtir cristiano, conocido por la leyenda del drag√≥n.' }],
                '11-4': [{ nombre: 'San Carlos Borromeo', descripcion: 'Cardenal arzobispo de Mil√°n, destacado en la Reforma Cat√≥lica.' }]
            };
            
            const key = `${month}-${day}`;
            const saints = saintsCalendar[key] || [{
                nombre: 'Santo del D√≠a',
                descripcion: 'Informaci√≥n no disponible en este momento. Por favor, visite el calendario lit√∫rgico cat√≥lico para m√°s informaci√≥n.'
            }];
            
            displayMultipleSaints(saints);
        }

        // Inicializar la p√°gina
        initializeDatePickers();
        displayDate();
        getSaintOfTheDay();
    </script>
</body>
</html>
